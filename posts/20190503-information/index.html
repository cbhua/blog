<!DOCTYPE html>
<html lang="zh-cn" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Chuanbo" />
	
	
	
	<title>信息论实验 ｜ TIMEGG</title>
	
    
    
    <meta name="description" content="这是信息论这门课程学期中我们所做的几个实验，主要基于 Python，集中于几种信息编码和信道编码方式的实现，同时包含一些常用工具的实现，如信息熵的计算、信道容量的计算等等。" />
    

    
    
    <meta name="keywords" content="Hugo, theme, zozo" />
    

	
    
    <link rel="shortcut icon" href="https://timegg.top/images/favicon.ico" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://timegg.top/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://timegg.top/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://timegg.top/css/highlight.css" />

    
    
</head>

<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">主页</a>
            </li>
            
            <li>
                <a href="/posts/">归档</a>
            </li>
            
            <li>
                <a href="/tags/">标签</a>
            </li>
            
            <li>
                <a href="/links/">链接</a>
            </li>
            
            <li>
                <a href="/about/">关于</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <a href="https://timegg.top/">
                <img src="https://timegg.top/images/favicon.ico" alt="TIMEGG">
                
            </a>
            
        </div>
        <div class="description">
            <p class="sub_title">放进时光蛋里。</p>
            <div class="my_socials">
                
                
                <a href="https://github.com/cbhua" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="%20" title="instagram" target="_blank"><i class="ri-instagram-fill"></i></a>
                
                
                
                <a href="https://twitter.com/huachuanbo" title="twitter" target="_blank"><i class="ri-twitter-fill"></i></a>
                
                
                
                <a href="https://weibo.com/u/6177306082" title="weibo" target="_blank"><i class="ri-weibo-fill"></i></a>
                
                
                <a href="https://timegg.top/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/20190503-information/'>信息论实验</a></h2>
                        <span class="date">2019.05.03</span>
                    </div>
                    <div class="post_content markdown"><p>本学期专业课程中有<a href="https://zh.wikipedia.org/wiki/%E4%BF%A1%E6%81%AF%E8%AE%BA"><strong>信息论</strong></a>这一门课程，在此之前我学习神经网络的过程中了解了一些与信息论相关的内容，也很开心能开这门课。在这学期中有一些信息论的实验课需要完成一些任务，考虑到上学期学习数值分析没有及时记录所做内容，到后来补上去的各种困难，本次我打算完成一次实验之后及时记录实验内容，其中包含实验内容、遇到的问题和解决方案还有一些自己的想法。</p>
<p>搜索引擎能搜索到的相关实现几乎都是使用 Matlab 实现的，很少有通过其他语言来做这些实验，正巧在寒假进行了机器学习的学习，当时使用 Python 比较多，所以在这期实验开始时我选择了用 Python 做这些实验。</p>
<p>但是在真正实际操作中发现，这些问题用 Python 实现并不是非常的方便，主要还是在使用 Pandas 和 Numpy 这两个包，这样并不能体现出 Python 在解决这些实验问题上的优势，不如使用 Ruby 和 Matlab。不过，既然选择了这门语言做到底，就坚持做一下。</p>
<h2 id="test-1">Test 1</h2>
<p><strong>实验内容</strong>：对于任意给出的信源 S=[X,p(x)] 计算信息熵 H(x)</p>
<ul>
<li><strong>Input</strong>: 路径：各字母出现频率（含 Space），保存于 CSV 文件中</li>
<li><strong>Output</strong>: 字母的信息熵</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="err">文件目录</span><span class="p">:</span>
<span class="n">information_theory_experiment_test1</span>
 <span class="o">|---</span> <span class="n">entropy_cal</span><span class="o">.</span><span class="n">py</span>
 <span class="o">|---</span> <span class="n">letter_frequence</span><span class="o">.</span><span class="n">csv</span>
<span class="c1">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="s2">&#34;&#34;&#34;Test 1&#34;&#34;&#34;</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">calInfoEntropy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34;
</span><span class="s2">        :type path: str
</span><span class="s2">        &#34;&#34;&#34;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">num_tem</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">num_tem</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">num_tem</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div><p>Pandas 自带读取 CSV 文件功能，读取结果为矩阵，<strong>CSV 文件中第一行会被识别为列名</strong>。取数函数有多种：</p>
<ul>
<li><code>loc</code>，基于列 label，可选取特定行（根据行 index）</li>
<li><code>iloc</code>，基于行/列的 position</li>
<li><code>at</code>，根据指定行 index 及列 label，快速定位 DataFrame 的元素</li>
<li><code>iat</code>，与 at 类似，不同的是根据 position 来定位的</li>
<li><code>ix</code>，为 loc 与 iloc 的混合体，既支持 label 也支持 position</li>
</ul>
<p><a href="https://blog.csdn.net/LY_ysys629/article/details/55224284">这篇 Post</a> 有较为详细的说明。</p>
<h2 id="test-2">Test 2</h2>
<p><strong>实验内容</strong>：对于给出的信源 S=[X,p(s)] 和信道 Q=(q(yj|xi)) 计算噪音熵 H(X|Y) 和互信息 I(X;Y)</p>
<ul>
<li><strong>Input</strong>: 路径：各字母出现频率（含 Space），信道矩阵，分别保存于 CSV 文件中</li>
<li><strong>Output</strong>: 字母的噪音熵和互信息</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="err">文件目录</span><span class="p">:</span>
<span class="n">information_theory_experiment_test2</span>
 <span class="o">|---</span> <span class="n">entropy_cal</span><span class="o">.</span><span class="n">py</span>
 <span class="o">|---</span> <span class="n">letter_frequence</span><span class="o">.</span><span class="n">csv</span>
 <span class="o">|---</span> <span class="n">communication_channel</span><span class="o">.</span><span class="n">csv</span>
<span class="c1">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="s2">&#34;&#34;&#34;Test 2&#34;&#34;&#34;</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">conditional_entropy</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">mutual_information</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># input data</span>
<span class="n">letter_fre_x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;letter_frequency.csv&#39;</span><span class="p">)</span>
<span class="n">comm_channel</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;communication_channel.csv&#39;</span><span class="p">)</span>
<span class="n">joint_probability_distribution</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">27</span><span class="p">,</span> <span class="mi">27</span><span class="p">))</span>

<span class="c1"># cal the conditional entropy</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">26</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">26</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">comm_channel</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">joint_probability_distribution</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">letter_fre_x</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">comm_channel</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
            <span class="n">conditional_entropy</span> <span class="o">-=</span> \
                <span class="n">joint_probability_distribution</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">comm_channel</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">continue</span>

<span class="n">letter_fre_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">joint_probability_distribution</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># cal the mutual information</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">26</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">26</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">comm_channel</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">mutual_information</span> <span class="o">+=</span> \
                <span class="n">joint_probability_distribution</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> \
                <span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">joint_probability_distribution</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">letter_fre_x</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">letter_fre_y</span><span class="p">[</span><span class="n">j</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">continue</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The conditional entropy is: &#39;</span><span class="p">,</span> <span class="n">conditional_entropy</span><span class="p">,</span> <span class="s1">&#39; bit&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The mutual information is: &#39;</span><span class="p">,</span> <span class="n">mutual_information</span><span class="p">,</span> <span class="s1">&#39;bit&#39;</span><span class="p">)</span>
</code></pre></div><p>在实现方面和 Test 1 没有什么太大的差距，主要在于信息论的算法上面。</p>
<h2 id="test-3">Test 3</h2>
<p><strong>实验内容</strong>：给出各英文字母的出现概率，构造 0, 1, 2 Huffman 编码，并将下述一句话进行 Huffman 编码</p>
<blockquote>
<p>The fundamental problem of communication is that of reproducing at one point either exactly or approximately a message selected at another point.</p>
</blockquote>
<ul>
<li><strong>Input</strong>: 各字母出现频率（含 Space），欲 Huffman 编码的句子</li>
<li><strong>Output</strong>: Huffman 编码结果（<strong>使用结果编码句子在这里暂时省略</strong>，Test 5 会提到）</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="err">文件目录</span><span class="p">:</span>
<span class="n">information_theory_experiment_test3</span>
 <span class="o">|---</span> <span class="n">huffman_coding</span><span class="o">.</span><span class="n">py</span>
 <span class="o">|---</span> <span class="n">letter_frequence</span><span class="o">.</span><span class="n">csv</span>
 <span class="o">|---</span> <span class="n">sentence</span><span class="o">.</span><span class="n">docx</span>
<span class="c1">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="s2">&#34;&#34;&#34;Test 3&#34;&#34;&#34;</span>

<span class="kn">import</span> <span class="nn">queue</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="k">class</span> <span class="nc">HuffmanNode</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">root</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>
    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">))</span>

<span class="n">letter_fre</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;letter_frequency.csv&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">create_tree</span><span class="p">(</span><span class="n">frequencies</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">PriorityQueue</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">frequencies</span><span class="p">:</span>   
        <span class="n">p</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>             
    <span class="k">while</span> <span class="n">p</span><span class="o">.</span><span class="n">qsize</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>        
        <span class="n">l</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">p</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>  
        <span class="n">node</span> <span class="o">=</span> <span class="n">HuffmanNode</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">put</span><span class="p">((</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">node</span><span class="p">))</span>     
    <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>              

<span class="n">node</span> <span class="o">=</span> <span class="n">create_tree</span><span class="p">(</span><span class="n">letter_fre</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">walk_tree</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="p">{}):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    node 是一个tuple(freq, HuffmanNode|character)
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">HuffmanNode</span><span class="p">):</span>
        <span class="n">code1</span> <span class="o">=</span> <span class="n">walk_tree</span><span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">left</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">code2</span> <span class="o">=</span> <span class="n">walk_tree</span><span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">right</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">code1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">code1</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">code</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">v</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">code2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">code2</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">code</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">v</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="n">code</span><span class="p">[</span><span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">prefix</span>
    <span class="k">return</span><span class="p">(</span><span class="n">code</span><span class="p">)</span> 

<span class="n">code</span> <span class="o">=</span> <span class="n">walk_tree</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> 

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;{:6.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">continue</span>
</code></pre></div><h2 id="test-4">Test 4</h2>
<p><strong>实验内容</strong>：对给出的信道转移矩阵 Q=(q(y|x))，应用迭代法计算信道容量 C</p>
<p><strong>高噪声打字机</strong>：设信道输入与输出字母集分别为 X=Y=A,B,C,…,Z,−，其中 − 表示空格，这 27 个字符排成一圈，当输入某个字符时，输出以等概率 1/3 产生它本生及 相邻 2 个字符，例如：</p>
<p>P(Y=A|X=B)=P(Y=B|X=B)=P(Y=C|X=B)=1/3</p>
<ul>
<li><strong>Input</strong>: 各字母出现频率（含 Space），信道转移矩阵</li>
<li><strong>Output</strong>: 信道容量</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="err">文件目录</span><span class="p">:</span>
<span class="n">information_theory_experiment_test4</span>
 <span class="o">|---</span> <span class="n">channel_capacity_cal</span><span class="o">.</span><span class="n">py</span>
 <span class="o">|---</span> <span class="n">letter_frequence</span><span class="o">.</span><span class="n">csv</span>
 <span class="o">|---</span> <span class="n">communication_channel</span><span class="o">.</span><span class="n">csv</span>
</code></pre></div><p>首先，这里是我基于 Matlab 程序改进成的 Python 程序，是个<strong>错误示例</strong>，其原因在于 Matlab 中对矩阵操作转移到 Python 中 DataFrame 实现起来有点麻烦，DataFrame 多用于神经网络数据导入是非常方便的，具体分隔来处理有点麻烦。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="s2">&#34;&#34;&#34;Test 4 - Error Example&#34;&#34;&#34;</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">math</span>


<span class="k">def</span> <span class="nf">channel_capacity_cal</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;the function to cal the channel capacity&#34;&#34;&#34;</span>
    <span class="n">tem_precision_x</span> <span class="o">=</span> <span class="n">p</span>
    <span class="n">channel_cap1</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">channel_cap2</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">column</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">rev_transfer_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span>
        <span class="n">out_precision</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span>
        <span class="n">tem_precision_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
            <span class="n">tem_sum</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
                <span class="n">tem_sum</span> <span class="o">+=</span> <span class="n">q</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="o">*</span> <span class="n">tem_precision_x</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">out_precision</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tem_sum</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
                <span class="n">rev_transfer_matrix</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="o">*</span> <span class="n">tem_precision_x</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">out_precision</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
            <span class="n">tem_sum</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">rev_transfer_matrix</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">tem_sum</span> <span class="o">+=</span> <span class="n">q</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">rev_transfer_matrix</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">])</span>
                <span class="n">tem_precision_y</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">tem_sum</span><span class="p">)</span>
                <span class="nb">sum</span> <span class="o">+=</span> <span class="n">tem_precision_y</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
            <span class="n">tem_precision_y</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">/=</span> <span class="nb">sum</span>
        <span class="n">channel_cap2</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span>

        <span class="k">print</span><span class="p">(</span><span class="n">channel_cap2</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">channel_cap1</span> <span class="o">-</span> <span class="n">channel_cap2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">channel_cap1</span> <span class="o">=</span> <span class="n">channel_cap2</span>
            <span class="n">tem_precision_x</span> <span class="o">=</span> <span class="n">tem_precision_y</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&#34;the iterations times is: &#34;</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span>
            <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">channel_cap1</span> <span class="o">=</span> <span class="n">channel_cap2</span>
            <span class="n">tem_precision_x</span> <span class="o">=</span> <span class="n">tem_precision_y</span>

    <span class="k">print</span><span class="p">(</span><span class="n">tem_precision_x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">channel_cap1</span>


<span class="n">letter_fre</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;letter_frequency.csv&#39;</span><span class="p">)</span>
<span class="n">channel_transition_probability</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;channel_transition_probability.csv&#39;</span><span class="p">)</span>

<span class="n">max_iterations</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">precision</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="n">channel_capacity_cal</span><span class="p">(</span><span class="n">letter_fre</span><span class="p">,</span> <span class="n">channel_transition_probability</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="n">max_iterations</span><span class="p">)</span>
</code></pre></div><p>在参考了 BUPT Zhengyuan Zhu 的处理方法之后进行了改进，但是这里存在的比较大的问题是多次迭代的转移矩阵需要手动计算，可以在此方法之前再添加 math 的方法以实现转移矩阵的计算。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">letter_fre</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;letter_frequency.csv&#39;</span><span class="p">)</span>
<span class="n">channel_transition_probability</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;channel_transition_probability.csv&#39;</span><span class="p">)</span>
<span class="n">precision</span> <span class="o">=</span> <span class="mf">0.001</span>

<span class="k">def</span> <span class="nf">initiate_prob_distrib</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="n">p_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;初始化概率分布为:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">p_x</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">p_x</span>

<span class="n">p_x</span> <span class="o">=</span> <span class="n">initiate_prob_distrib</span><span class="p">(</span><span class="n">channel_transition_probability</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">iteration</span><span class="p">(</span><span class="n">p_i</span><span class="p">,</span> <span class="n">p_ij</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
    <span class="n">q_j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">p_i</span> <span class="o">*</span> <span class="n">p_ij</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;NO. &#34;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34; iteration: q_j:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">q_j</span><span class="p">)</span>

    <span class="n">alpha_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">p_ij</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">p_ij</span> <span class="o">/</span> <span class="n">q_j</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">alpha_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">expand_dims</span><span class="p">(</span><span class="n">alpha_i</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;NO. &#34;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34; iteration: alpha_i:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">alpha_i</span><span class="p">)</span>

    <span class="n">u</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">alpha_i</span><span class="p">,</span> <span class="n">p_i</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;NO. &#34;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34; iteration: u:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">u</span><span class="p">)</span>

    <span class="n">I_L</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">u</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;NO. &#34;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34; iteration: I_L:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">I_L</span><span class="p">)</span>

    <span class="n">I_U</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">alpha_i</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;NO. &#34;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34; iteration: I_U:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">I_U</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">I_U</span> <span class="o">-</span> <span class="n">I_L</span> <span class="o">&lt;</span> <span class="n">precision</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;capacity:</span><span class="se">\n</span><span class="s2"> &#34;</span><span class="p">,</span> <span class="n">I_L</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;input letter frequency:</span><span class="se">\n</span><span class="s2"> &#34;</span><span class="p">,</span> <span class="n">p_i</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">I_L</span><span class="p">,</span> <span class="n">p_i</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">p_i</span> <span class="o">=</span> <span class="n">p_i</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">alpha_i</span><span class="p">)</span> <span class="o">/</span> <span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;No.&#34;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34;Update Probability distributions:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">p_i</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span><span class="p">,</span> <span class="n">p_i</span>

<span class="n">flag</span><span class="p">,</span> <span class="n">I_L</span><span class="p">,</span> <span class="n">p_i</span> <span class="o">=</span> <span class="n">iteration</span><span class="p">(</span><span class="n">p_x</span><span class="p">,</span> <span class="n">channel_transition_probability</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">ans_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">(</span><span class="n">channel_transition_probability1</span><span class="p">,</span> <span class="n">channel_transition_probability2</span><span class="p">,</span> <span class="n">channel_transition_probability3</span><span class="p">,</span> <span class="n">channel_transition_probability4</span><span class="p">):</span>
    <span class="n">flag</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">p_x</span> <span class="o">=</span> <span class="n">initiate_prob_distrib</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
        <span class="n">flag</span><span class="p">,</span> <span class="n">ans</span><span class="p">,</span> <span class="n">tmp_p</span> <span class="o">=</span> <span class="n">iteration</span><span class="p">(</span><span class="n">p_x</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
            <span class="n">p_x</span> <span class="o">=</span> <span class="n">tmp_p</span>
            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ans_dict</span><span class="p">[</span><span class="n">ans</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp_p</span>

<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ans_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;capacity：&#34;</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;input letter frequency：</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">v</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div><h2 id="test-5">Test 5</h2>
<p><strong>实验内容</strong>：</p>
<ol>
<li>
<p>基于 Test 3 的程序，修改为构造 <strong>0, 1 二元 Huffman 编码程序</strong></p>
</li>
<li>
<p>使用上述二元 Huffman 编码程序为下一段文字进行编码</p>
<blockquote>
<p>The fundamental problem of communication is that of reproducing at one point either exactly or approximately a message selected at another point.</p>
</blockquote>
</li>
<li>
<p>使用给定的生成矩阵，对上述编码结果进行<strong>信道编码（Hamming 编码）</strong></p>
</li>
<li>
<p>任意修改一定量上述编码结果，之后对此修改之后的编码使用校验矩阵，进行<strong>信道译码（Hamming 译码）</strong></p>
</li>
</ol>
<p>Test 5 在整合前面的实验之后加入信道编码部分。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="err">文件目录</span><span class="p">:</span>
<span class="n">information_theory_experiment_test5</span>
 <span class="o">|---</span> <span class="n">run</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span> <span class="err">主程序</span>
 <span class="o">|---</span> <span class="n">huffman_coding</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span> <span class="err">实现</span> <span class="n">Huffman</span> <span class="err">编码</span>
 <span class="o">|---</span> <span class="n">hamming_coding</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span> <span class="err">实现</span> <span class="n">Hamming</span> <span class="err">编码</span>
 <span class="o">|---</span> <span class="n">hamming_decoding</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span> <span class="err">实现</span> <span class="n">Hamming</span> <span class="err">译码</span>
 <span class="o">|---</span> <span class="n">article</span><span class="o">.</span><span class="n">docx</span> <span class="o">-</span> <span class="err">编码文字文档</span>
 <span class="o">|---</span> <span class="n">hamming_coding</span><span class="o">.</span><span class="n">csv</span> <span class="o">-</span> <span class="err">生成矩阵</span>
 <span class="o">|---</span> <span class="n">hamming_decoding</span><span class="o">.</span><span class="n">csv</span> <span class="o">-</span> <span class="err">校验矩阵</span>
 <span class="o">|---</span> <span class="n">letter_frequecny</span><span class="o">.</span><span class="n">csv</span> <span class="o">-</span> <span class="err">字母频率</span>
<span class="c1">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="s2">&#34;&#34;&#34;Test_5/run.py&#34;&#34;&#34;</span>

<span class="kn">import</span> <span class="nn">huffman_coding</span>
<span class="kn">import</span> <span class="nn">hamming_coding</span>
<span class="kn">import</span> <span class="nn">hamming_decoding</span>

<span class="n">huffman_coding_result</span> <span class="o">=</span> <span class="n">huffman_coding</span><span class="o">.</span><span class="n">huffman_coding</span><span class="p">()</span>
<span class="n">hamming_coding_result</span> <span class="o">=</span> <span class="n">hamming_coding</span><span class="o">.</span><span class="n">hamming_coding</span><span class="p">(</span><span class="n">huffman_coding_result</span><span class="p">)</span>
<span class="n">hamming_decoding</span><span class="o">.</span><span class="n">hamming_decoding</span><span class="p">(</span><span class="n">huffman_coding_result</span><span class="p">,</span> <span class="n">hamming_coding_result</span><span class="p">)</span>
<span class="c1">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># Copyright (c) 2019 - magic_kurakun &lt;magickurakun@gmail.com&gt;</span>

<span class="s2">&#34;&#34;&#34;Test_5/huffman_coding.py&#34;&#34;&#34;</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">docx</span>


<span class="k">def</span> <span class="nf">huffman_coding</span><span class="p">(</span><span class="n">letter_fre</span><span class="p">):</span>
    <span class="n">letter_fre</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;letter_frequency.csv&#39;</span><span class="p">)</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">docx</span><span class="o">.</span><span class="n">opendocx</span><span class="p">(</span><span class="s2">&#34;article.docx&#34;</span><span class="p">)</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">docx</span><span class="o">.</span><span class="n">getdocumenttext</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
    <span class="n">huffman_coding_result</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
    <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">huffman</span> <span class="o">=</span> <span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">26</span><span class="p">):</span>
        <span class="n">tem</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,)</span>
        <span class="n">huffman</span> <span class="o">+=</span> <span class="n">tem</span>

    <span class="k">for</span> <span class="n">loop</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">):</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="mi">26</span> <span class="o">-</span> <span class="n">loop</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="n">letter_fre</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;probability&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">122</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">letter_fre</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
                <span class="n">huffman</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">96</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;0&#39;</span>
            <span class="k">if</span> <span class="n">letter_fre</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">flag</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
                <span class="n">huffman</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">96</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;1&#39;</span>
            <span class="k">if</span> <span class="n">letter_fre</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">flag</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
                <span class="n">huffman</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">96</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;2&#39;</span>
        <span class="k">if</span> <span class="n">letter_fre</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
            <span class="n">huffman</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">96</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;0&#39;</span>
        <span class="k">if</span> <span class="n">letter_fre</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">flag</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
            <span class="n">huffman</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">96</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;1&#39;</span>
        <span class="k">if</span> <span class="n">letter_fre</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">flag</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
            <span class="n">huffman</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">96</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;2&#39;</span>
        <span class="n">sum_tem</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">flag</span><span class="p">,</span> <span class="n">flag</span> <span class="o">+</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">sum_tem</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">letter_fre</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">letter_fre</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">letter_fre</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">flag</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sum_tem</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;The huffman code of such letters are as follow: &#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">26</span><span class="p">):</span>
        <span class="n">length</span> <span class="o">+=</span> <span class="n">huffman</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">huffman</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;The average length of huffman code is: &#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">length</span> <span class="o">/</span> <span class="mi">27</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;The sentence was translated to huffman code as follow: &#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">122</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">doc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">chr</span><span class="p">(</span><span class="n">j</span><span class="p">):</span>
                <span class="k">print</span><span class="p">(</span><span class="n">huffman</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">96</span><span class="p">])</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">flag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">huffman</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="p">)):</span>
        <span class="n">tem</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">tem</span> <span class="o">==</span> <span class="mi">32</span><span class="p">:</span>
            <span class="n">huffman_coding_result</span> <span class="o">+=</span> <span class="n">huffman</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">tem</span> <span class="o">&gt;=</span> <span class="mi">65</span> <span class="o">&amp;</span> <span class="n">tem</span> <span class="o">&lt;=</span> <span class="mi">90</span><span class="p">:</span>
            <span class="n">huffman_coding_result</span> <span class="o">+=</span> <span class="n">huffman</span><span class="p">[</span><span class="n">tem</span> <span class="o">-</span> <span class="mi">64</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">tem</span> <span class="o">&gt;=</span> <span class="mi">97</span> <span class="o">&amp;</span> <span class="n">tem</span> <span class="o">&lt;=</span> <span class="mi">122</span><span class="p">:</span>
            <span class="n">huffman_coding_result</span> <span class="o">+=</span> <span class="n">huffman</span><span class="p">[</span><span class="n">tem</span> <span class="o">-</span> <span class="mi">96</span><span class="p">]</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;The result of huffman coding: &#34;</span> <span class="o">+</span> <span class="n">huffman_coding_result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">huffman_coding_result</span>
<span class="c1">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># Copyright (c) 2019 - magic_kurakun &lt;magickurakun@gmail.com&gt;</span>

<span class="s2">&#34;&#34;&#34;Test_5/hamming_coding.py&#34;&#34;&#34;</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">docx</span>


<span class="k">def</span> <span class="nf">hamming_coding</span><span class="p">(</span><span class="n">huffman_coding_result</span><span class="p">):</span>
    <span class="n">code_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">huffman_coding_result</span><span class="p">)</span>
    <span class="n">remainder</span> <span class="o">=</span> <span class="n">code_length</span> <span class="o">%</span> <span class="mi">4</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">hamming_coding_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;hamming_coding.csv&#39;</span><span class="p">)</span>
    <span class="n">hamming_coding_result</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">code_length</span> <span class="o">-</span> <span class="n">remainder</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">remainder</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-</span> <span class="n">remainder</span><span class="p">):</span>
            <span class="n">huffman_coding_result</span> <span class="o">+=</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">((</span><span class="n">code_length</span> <span class="o">-</span> <span class="n">remainder</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">huffman_coding_result</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span><span class="p">])</span> <span class="o">-</span> <span class="mi">48</span>
        <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">huffman_coding_result</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">48</span>
        <span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">huffman_coding_result</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span> <span class="o">-</span> <span class="mi">48</span>
        <span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">huffman_coding_result</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">])</span> <span class="o">-</span> <span class="mi">48</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">hamming_coding_list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">c</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">c</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">s</span><span class="p">[</span><span class="mi">51</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">s</span><span class="p">[</span><span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">((</span><span class="n">code_length</span> <span class="o">-</span> <span class="n">remainder</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
            <span class="n">hamming_coding_result</span> <span class="o">+=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">hamming_coding_result</span> <span class="o">+=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="nb">int</span><span class="p">((</span><span class="n">code_length</span> <span class="o">-</span> <span class="n">remainder</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">),</span> <span class="n">i</span><span class="p">])</span>

    <span class="k">print</span><span class="p">(</span><span class="n">hamming_coding_result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span>
<span class="c1">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># Copyright (c) 2019 - magic_kurakun &lt;magickurakun@gmail.com&gt;</span>

<span class="s2">&#34;&#34;&#34;Test_5/hamming_decoding.py&#34;&#34;&#34;</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">docx</span>


<span class="k">def</span> <span class="nf">hamming_decoding</span><span class="p">(</span><span class="n">huffman_coding_result</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
    <span class="n">code_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">huffman_coding_result</span><span class="p">)</span>
    <span class="n">remainder</span> <span class="o">=</span> <span class="n">code_length</span> <span class="o">%</span> <span class="mi">4</span>
    <span class="n">hamming_decoding_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;hamming_decoding.csv&#39;</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">code_length</span> <span class="o">-</span> <span class="n">remainder</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">hamming_decoding_result</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
    <span class="n">hamming_decoding_result_tem</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">((</span><span class="n">code_length</span> <span class="o">-</span> <span class="n">remainder</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:],</span> <span class="n">hamming_decoding_list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">c</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">c</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">c</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">hamming_decoding_list</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">hamming_decoding_list</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span>\
                    <span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">hamming_decoding_list</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
                <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">((</span><span class="n">code_length</span> <span class="o">-</span> <span class="n">remainder</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
            <span class="n">hamming_decoding_result_tem</span> <span class="o">+=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">hamming_decoding_result_tem</span> <span class="o">+=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="nb">int</span><span class="p">((</span><span class="n">code_length</span> <span class="o">-</span> <span class="n">remainder</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">),</span> <span class="n">i</span><span class="p">])</span>

    <span class="n">decode_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">hamming_decoding_result_tem</span><span class="p">)</span>
    <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">break_while</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">flag</span> <span class="o">&lt;</span> <span class="n">decode_length</span> <span class="o">-</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">remainder</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">26</span><span class="p">):</span>
            <span class="n">str_tem</span> <span class="o">=</span> <span class="n">hamming_decoding_result_tem</span><span class="p">[</span><span class="n">flag</span><span class="p">:</span><span class="n">flag</span> <span class="o">+</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">26</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">str_tem</span> <span class="o">==</span> <span class="n">huffman_coding_list</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="p">:]:</span>
                    <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">hamming_decoding_result</span> <span class="o">+=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">hamming_decoding_result</span> <span class="o">+=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">96</span><span class="p">)</span>
                    <span class="n">flag</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">str_tem</span><span class="p">)</span>
                    <span class="n">break_while</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">break_while</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="k">print</span><span class="p">(</span><span class="n">hamming_decoding_result</span><span class="p">)</span>
</code></pre></div><p>经过测试之后发现经过校验矩阵之后，传输信息错误率在 0.01 之下，根据传输量趋于 0，即是信道编码的意义。</p>
<h1 id="最后">最后</h1>
<p>实验拿了满分，快乐。</p>
</div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="https://timegg.top/tags/%E6%95%99%E7%A8%8B%E6%96%87%E6%A1%A3/">教程文档</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                
                
<div class="doc_comments">
    <div class="comments_block_title">发表评论</div>
    <div id="vcomments"></div>
</div>

<link rel="stylesheet" href="https://timegg.top/css/comments.css" />

<script src="//code.bdstatic.com/npm/leancloud-storage@4.12.0/dist/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>

<script type="text/javascript">
    new Valine({
        el: '#vcomments',
        appId: '12HKA37DAChBWQgBC7PA4eBw-gzGzoHsz',
        appKey: 'UxknCfg5bWmkI2eGar5hDxWq',
        placeholder: ' ',
        visitor: 'true',
        serverURLs: '<%= Site.Params.valine.serverURLs>',
    })
</script>



                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://timegg.top">TIMEGG © 2017 - 2022,</a>
        <a href="http://www.gohugo.io/">Powered by Hugo.</a>
    </div>

    <div class="footer_slogan">
        <span>重拾写作的乐趣。</span>
    </div>
</footer>

<script>
	(function () {
		const customFont = document.createElement('link');
		customFont.href = "https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;700&display=swap";
		customFont.type = "text/css";
		customFont.rel = "stylesheet";
		document.head.appendChild(customFont);
	}());
	
	
	
	
	
	
	
</script>
    <script src="https://timegg.top/js/jquery-3.5.1.min.js"></script>
<link href="https://timegg.top/css/fancybox.min.css" rel="stylesheet">
<script src="https://timegg.top/js/fancybox.min.js"></script>
<script src="https://timegg.top/js/zozo.js"></script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-164502321-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>

</html>